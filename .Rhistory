devtools::document()
install.packages("devtools")
library(devtools)
install.packages("usethis")
install.packages("usethis")
library(devtools)
devtools::document()
devtools::document()
devtools::document()
devtools::document()
pkgload::dev_help('advancedBayesianCausalInference')
library(Rcpp)
sourceCpp("path/to/advancedBayesianCausalInference.cpp")
library(Rcpp)
library(Rcpp)
data <- matrix(c(1, 0, 1, 1, 0, 1), nrow = 3)
causal_matrix <- advancedBayesianCausalInference(data, 1000, 200)
View(data)
file_name <- "BayesianCI.cpp"
absolute_path <- file.path(getwd(), file_name)
print(absolute_path)"
sourceCpp("BayesianCI.cpp")
file_name <- "BayesianCI.cpp"
absolute_path <- file.path(getwd(), file_name)
print(absolute_path)
if (file.exists(absolute_path)) {
sourceCpp(absolute_path)
} else {
cat("文件不存在，请检查路径:", absolute_path, "\n")
}
sourceCpp("path/to/advancedBayesianCausalInference.cpp")
sourceCpp("/Users/wurui/SA23204151/BayesianCI.cpp")
sourceCpp("/Users/wurui/SA23204151/src/BayesianCI.cpp")
data <- matrix(c(1, 0, 1, 1, 0, 1), nrow = 3)
causal_matrix <- advancedBayesianCausalInference(data, 1000, 200)
print(causal_matrix)
library(randomForest)
install.packages("randomForest")
install.packages("randomForest")
install.packages("dplyr")
install.packages("purrr")
library(randomForest)
library(dplyr)
library(purrr)
set.seed(123)
n <- 100  
X <- data.frame(
feature1 = rnorm(n),
feature2 = rnorm(n)
)
Y <- rnorm(n) + 0.5 * (X$feature1 + X$feature2) 
W <- rbinom(n, 1, 0.5)  
results <- causal_random_forest(X, Y, W)
causal_random_forest <- function(X, Y, W, num.trees = 500, mtry = NULL, min.node.size = 5, sample.fraction = 0.632, alpha = 0.05) {
# Check inputs
if (length(Y) != length(W) || nrow(X) != length(W)) {
stop("Length of Y and W must match the number of rows in X.")
}
# Initialize variables
n <- nrow(X)
if (is.null(mtry)) {
mtry <- floor(sqrt(ncol(X)))
}
# Fit the random forest model for treated and control groups
rf_treated <- randomForest(x = X[W == 1, ], y = Y[W == 1], ntree = num.trees, mtry = mtry, nodesize = min.node.size, sampsize = floor(sample.fraction * sum(W == 1)))
rf_control <- randomForest(x = X[W == 0, ], y = Y[W == 0], ntree = num.trees, mtry = mtry, nodesize = min.node.size, sampsize = floor(sample.fraction * sum(W == 0)))
# Predict treatment effects
pred_treated <- predict(rf_treated, newdata = X)
pred_control <- predict(rf_control, newdata = X)
treatment_effects <- pred_treated - pred_control
# Calculate confidence intervals
se <- sqrt(var(treatment_effects) / length(treatment_effects))
ci_lower <- treatment_effects - qnorm(1 - alpha / 2) * se
ci_upper <- treatment_effects + qnorm(1 - alpha / 2) * se
# Return results
return(list(treatment_effects = treatment_effects, ci_lower = ci_lower, ci_upper = ci_upper))
}
set.seed(123)
n <- 100 
X <- data.frame(
feature1 = rnorm(n),
feature2 = rnorm(n)
)
Y <- rnorm(n)
W <- rbinom(n, 1, 0.5)
results <- causal_random_forest(X, Y, W)
print(results$treatment_effects)
print(results$ci_lower)
print(results$ci_upper)
gc()
gc()
devtools::build_vignettes()
devtools::build(vignettes=FALSE)
